const e=navigator.userAgent,t=navigator.userAgent.toLowerCase(),r=/(iPad).*OS\s([\d_]+)/.test(e),a=/(iPod)(.*OS\s([\d_]+))?/.test(e),s=!r&&/(iPhone\sOS)\s([\d_]+)/.test(e),o=r||a||s,n=/(Android);?[\s\/]+([\d.]+)?/.test(e),i=/micromessenger/i.test(e),c=/QQ\/([\d\.]+)/.test(e),l=/Qzone\//.test(e),h=/MQQBrowser/i.test(e)&&!i&&!c,u=/UCBrowser/i.test(e),d=/mobile.*baidubrowser/i.test(e),p=/SogouMobileBrowser/i.test(e);/baiduboxapp/i.test(e);const m=/360 Aphone Browser|QHBrowser/i.test(t);function f(){}function g(e,t=f){const r=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=e,a.async=!0,r.parentNode.insertBefore(a,r),a.onload=t}function S(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),a=1;a<arguments.length;a++){var s=arguments[a];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r}function w(e){if(o)location.href=e;else{var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),2e3)}}function _(e,t=!1){const r=[];for(let a in e)t?r.push(`${a}=${encodeURIComponent(e[a])}`):r.push(`${a}=${e[a]}`);return r.join("&")}const b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,a,s,o,n,i,c="",l=0;for(e=b._utf8_encode(e);l<e.length;)s=(t=e.charCodeAt(l++))>>2,o=(3&t)<<4|(r=e.charCodeAt(l++))>>4,n=(15&r)<<2|(a=e.charCodeAt(l++))>>6,i=63&a,isNaN(r)?n=i=64:isNaN(a)&&(i=64),c=c+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(n)+this._keyStr.charAt(i);return c},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}};const q=document.querySelector("meta[name=description]"),y=document.querySelector("link[rel*=icon]");var D={link:location.href,title:document.title,desc:Object(q).content||"",icon:Object(y).href||`${location.protocol}//${location.hostname}/favicon.ico`,from:"",success:f,fail:f,trigger:f};function C(e){return _({share_id:924053302,url:b.encode(e.link),title:b.encode(e.title),description:b.encode(e.desc),previewimageUrl:b.encode(e.icon),image_url:b.encode(e.icon)})}function k(){w(`${o?"mqqapi://share/to_fri?src_type=web&version=1&file_type=news":"mqqapi://share/to_fri?src_type=isqqBrowser&version=1&file_type=news"}&${C(D)}`)}function x(){w(`${o?"mqqapi://share/to_fri?file_type=news&src_type=web&version=1&generalpastboard=1&shareType=1&cflag=1&objectlocation=pasteboard&callback_type=scheme&callback_name=QQ41AF4B2A":"mqqapi://share/to_qzone?src_type=isqqBrowser&version=1&file_type=news&req_type=1"}&${C(D)}`)}function v(){const e={url:D.link,title:D.title,pic:D.icon,desc:D.desc};location.href=`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?${_(e,!0)}`}function M(){const e={url:D.link,title:D.title,pic:D.icon};location.href=`http://service.weibo.com/share/share.php?${_(e,!0)}`}class T{_shareData=D;_config={syncDescToTag:!1,syncIconToTag:!1,syncTitleToTag:!1};constructor(e){this.setConfig(e)}getShareData(){return S({},this._shareData)}setShareData(e={}){var t,r;S(this._shareData,e),this._config.syncDescToTag&&(t=this._shareData.desc,q?q.content=t:document.head.insertAdjacentHTML("beforeend",`<meta name="description" content="${t}">`)),this._config.syncIconToTag&&(r=this._shareData.icon,y?y.href=r:document.head.insertAdjacentHTML("beforeend",`<link rel="shortcut icon" href="${r}">`)),this._config.syncTitleToTag&&function(e){document.title=e}(this._shareData.title)}setConfig(e={}){S(this._config,e)}getConfig(){return S({},this._config)}}class A extends T{static commamdMap={wechattimeline:8,wechatfriend:1,qqfriend:4,qzone:3,weibo:11,copyurl:10,more:5,generateqrcode:7,default:void 0};constructor(e){super(e),g("https://jsapi.qq.com/get?api=app.share")}call(e="default",t){this.setShareData(t);const r=this.getShareData(),a=this.constructor.commamdMap[String(e).toLowerCase()];browser.app.share({title:r.title,description:r.desc,url:r.link,img_url:r.icon,from:r.from,to_app:a})}}class Q extends T{static commamdMap={wechattimeline:"kWeixinFriend",wechatfriend:"kWeixin",qqfriend:"kQQ",qzone:"kQZone",weibo:"kSinaWeibo",default:void 0};constructor(e){super(e)}call(e="default",t){this.setShareData(t);const r=this.getShareData(),a=this.constructor.commamdMap[String(e).toLowerCase()];ucbrowser.web_shareEX?ucbrowser.web_shareEX(JSON.stringify({title:r.title,content:r.desc,sourceUrl:r.link,imageUrl:r.icon,source:r.from,target:a})):ucbrowser.web_share(title,desc,link,a,"",from,"")}}class j extends T{static commamdMap={wechattimeline:"WechatTimeline",wechatfriend:"WechatFriends",qqfriend:"QQ",qzone:"Qzone",weibo:"SinaWeibo",default:""};constructor(e){super(e)}call(e="default",t){this.setShareData(t);const r=this.getShareData(),a=this.constructor.commamdMap[String(e).toLowerCase()];ucweb.startRequest("shell.page_share",[r.title,r.desc,r.link,a,"",r.from,r.icon])}}class B extends T{constructor(e){super(e)}call(e,t){this.setShareData(t);const r=this.getShareData();_flyflowNative.exec("bd_utils","shareWebPage",JSON.stringify({title:r.title,content:r.desc,landurl:r.link,imageurl:r.icon,shareSource:r.from}),"")}}class N extends T{constructor(e){super(e)}call(e,t){this.setShareData(t);const r=this.getShareData();location.href="baidubrowserapp://bd_utils?action=shareWebPage&params="+encodeURIComponent(JSON.stringify({title:r.title,content:r.desc,imageurl:r.icon,landurl:r.link,mediaType:0,share_type:"webpage"}))}}class $ extends T{constructor(e){super(e)}call(e,t){this.setShareData(t);const r=this.getShareData();SogouMse.Utility.shareWithInfo({shareTitle:r.title,shareContent:r.desc,shareImageUrl:r.icon,shareUrl:r.link})}}class O extends T{constructor(e){super(e)}call(e,t){throw alert("SogouAndroidBrowser"),new Error("the browser may not support share!")}}class W extends T{constructor(e){super(e)}call(e,t){const r=this.getShareData(),{title:a="",icon:s="",link:o=""}=r;let n={type:8,url:o,title:a,caller:"h5_share_peas",imgPath:s};alert("AndroidBrowser360"),console.log("shareParams$WXFriend="+btoa(encodeURIComponent(JSON.stringify(n)))+"&onShareCallback")}}class z extends T{constructor(e){super(e),this.setConfig(e)}call(e,t){this.setShareData(t)}setConfig(e){super.setConfig(e),this.init(this.getConfig().wechatConfig)}init(e){e&&g("https://res.wx.qq.com/open/js/jweixin-1.4.0.js",(()=>{wx.config(S({debug:!1,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","updateAppMessageShareData","updateTimelineShareData"]},e));const t=this._shareData,r={};Object.defineProperty(r,"trigger",{get:()=>(...e)=>{S(r,{title:t.title,desc:t.desc,link:t.link,imgUrl:t.icon,success:t.success,fail:t.fail,cancel:t.fail}),t.trigger(...e)},set(e){t.trigger=e},enumerable:!0}),wx.ready((()=>{wx.onMenuShareAppMessage(r),wx.onMenuShareQQ(r),wx.onMenuShareQZone(r),wx.onMenuShareWeibo(r),wx.onMenuShareTimeline(r),wx.updateAppMessageShareData(r),wx.updateTimelineShareData(r)}))}))}}class U extends T{constructor(e){super(e)}call(e="default",t){if(this.setShareData(t),!navigator.share){if("weibo"!==(e=String(e).toLowerCase()))throw"qqfriend"===e?k():"qzone"===e&&x(),alert("other Error"),new Error(`the browser may not support command ${e}!`);return alert("weibo"),void M()}const r=this.getShareData(),a={url:r.link,title:r.title,text:r.desc};alert("then-catch"),navigator.share(a).then(r.success).catch(r.fail)}}class E extends T{constructor(e){super(e),this.init()}call(e="default",t){this.setShareData(t),mqq.ui.showShareMenu()}init(){g("https://open.mobile.qq.com/sdk/qqapi.js",(()=>{const e=this._shareData;mqq.ui.setOnShareHandler((t=>{mqq.ui.shareMessage({back:!0,share_type:t,title:e.title,desc:e.desc,share_url:e.link,image_url:e.icon,sourceName:e.from},(t=>{0===t.retCode?e.success(t):e.fail(t)}))}))}))}}class L extends T{constructor(e){super(e),this.init()}setShareData(e){super.setShareData(e);const t=this.getShareData();(function(e){const t=document.createElement("a");return t.href=e,t.hostname})(t.link)!==location.hostname&&(t.link=location.href,console.warn("安卓的QQ自带浏览器分享url必须跟页面url同一个域名，已自动为你设置为当前页面的url"));try{mqq.data.setShareInfo({share_url:t.link,title:t.title,desc:t.desc,image_url:t.icon},(e=>{!0!==e&&console.warn(e)}))}catch(e){}}call(e="default",t){this.setShareData(t),mqq.ui.showShareMenu()}init(){g("https://open.mobile.qq.com/sdk/qqapi.js",(()=>{this.setShareData()}))}}class P extends T{constructor(e){super(e),this.init()}call(e="default",t){this.setShareData(t);const r=this.getShareData(),a=[],s=[],o=[],n=[];for(let e=0;e<5;e++)a.push(r.icon),n.push(r.link),s.push(r.title),o.push(r.desc);QZAppExternal.setShare((({code:e})=>{0!=e&&(this.hasSomethingWrong=!0)}),{type:"share",image:a,title:s,summary:o,shareURL:n})}setShareData(e){try{this.call("default",e)}catch(e){}}init(){g("https://qzonestyle.gtimg.cn/qzone/phone/m/v4/widget/mobile/jsbridge.js",(()=>{this.call("default")}))}}let I;const H=navigator.userAgent.toLowerCase();alert(H),alert("360"+m+"and"+/360 Aphone Browser/i.test(H)+"ios"+/QHBrowser/i.test(H)),i?I=z:c&&o?I=E:c&&n?I=L:l?I=P:h?I=A:u&&o?I=Q:u&&n?I=j:d&&n?I=B:d&&o?I=N:p&&o?I=$:m?(alert("360"),I=W):p&&n?(alert("isSogouMBrowser"),I=O):(alert("other"),I=U),window.NativeShare=I;var R=I;export{W as AndroidBrowser360,B as BaiduAndroidBrowser,N as BaiduIosBrowser,U as Others,L as QQAndroid,E as QQIos,A as QQMobileBrowser,P as QZone,T as Share,O as SogouAndroidBrowser,$ as SogouIosBrowser,j as UCAndroidBrowser,Q as UCIosBrowser,z as Wechat,R as default,k as shareToQQ,x as shareToQZone,v as shareToQZone4Web,M as shareToWeibo4Web};
